(function($){$.fn.evoGenmaps=function(opt){var defaults={delay:0,fnt:1,cal:'',mapSpotId:'',_action:''};var options=$.extend({},defaults,opt);var geocoder;if(options._action=='lightbox'){loadl_gmaps_in(this,options.cal,options.mapSpotId);}
if(options.fnt==1){this.each(function(){var eventcard=$(this).attr('eventcard');if(eventcard=='1'){$(this).find('a.desc_trig').each(function(elm){var obj=$(this);if(options.delay==0){load_googlemaps_here(obj);}else{setTimeout(load_googlemaps_here,options.delay,obj);}});}});}
if(options.fnt==2){if(options.delay==0){load_googlemaps_here(this);}else{setTimeout(load_googlemaps_here,options.delay,this);}}
if(options.fnt==3){loadl_gmaps_in(this,options.cal,'');}
if(options.fnt==4){if(this.attr('data-gmtrig')=='1'&&this.attr('data-gmap_status')!='null'){var cal=this.closest('div.ajde_evcal_calendar ');loadl_gmaps_in(this,cal,options.mapSpotId);}}
function load_googlemaps_here(obj){if(obj.data('gmstat')!='1'){obj.attr({'data-gmstat':'1'});}
var cal=obj.closest('div.ajde_evcal_calendar ');if(obj.attr('data-gmtrig')=='1'&&obj.attr('data-gmap_status')!='null'){loadl_gmaps_in(obj,cal,'');}}
function loadl_gmaps_in(obj,cal,mapId){var evodata=cal.find('.evo-data');var mapformat=evodata.data('mapformat');var ev_location=obj.find('.evcal_desc');var location_type=ev_location.attr('data-location_type');if(location_type=='address'){var address=ev_location.attr('data-location_address');var location_type='add';}else{var address=ev_location.attr('data-latlng');var location_type='latlng';}
var map_canvas_id=(mapId!=='')?mapId:obj.closest('.eventon_list_event').find('.event_description').find('.evcal_gmaps').attr('id');var styles='';if(typeof gmapstyles!=='undefined'&&gmapstyles!='default'){styles=$.parseJSON(gmapstyles);}
var zoom=evodata.data('mapzoom');var zoomlevel=(typeof zoom!=='undefined'&&zoom!==false)?parseInt(zoom):12;var scroll=evodata.data('mapscroll');if($('#'+map_canvas_id).length>0)
initialize(map_canvas_id,address,mapformat,zoomlevel,location_type,scroll,styles,evodata.attr('data-mapiconurl'));}};}(jQuery));;var geocoder;var test=3;function getGeocoder(){return geocoder;}
function initialize(map_canvas_id,address,mapformat,zoom_level,location_type,scrollwheel,styles,iconURL){var map;if(styles===undefined){if(typeof gmapstyles!=='undefined'&&gmapstyles!='default'){styles=JSON.parse(gmapstyles);}}
geocoder=new google.maps.Geocoder();var latlng=new google.maps.LatLng(45.524732,-122.677031);if(scrollwheel==false){var myOptions={center:latlng,mapTypeId:mapformat,zoom:zoom_level,scrollwheel:false,styles:styles,zoomControl:true,draggable:false}}else{var myOptions={center:latlng,mapTypeId:mapformat,zoom:zoom_level,styles:styles,zoomControl:true,scrollwheel:true,}}
var map_canvas=document.getElementById(map_canvas_id);map=new google.maps.Map(map_canvas,myOptions);if(location_type=='latlng'){var latlngStr=address.split(",",2);var lat=parseFloat(latlngStr[0]);var lng=parseFloat(latlngStr[1]);var latlng=new google.maps.LatLng(lat,lng);geocoder.geocode({'latLng':latlng},function(results,status){if(status==google.maps.GeocoderStatus.OK){var marker=new google.maps.Marker({map:map,position:latlng,icon:iconURL});map.setCenter(marker.getPosition());}else{document.getElementById(map_canvas_id).style.display='none';}});}else if(address==''){}else{geocoder.geocode({'address':address},function(results,status){if(status==google.maps.GeocoderStatus.OK){map.setCenter(results[0].geometry.location);var marker=new google.maps.Marker({map:map,position:results[0].geometry.location,icon:iconURL});}else{document.getElementById(map_canvas_id).style.display='none';}});}}